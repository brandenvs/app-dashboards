{% extends '../shared/auth_base.html' %}

{% block page_title %}signup{% endblock %}

<!--Body Content-->

{% block content %}
<div class="d-flex justify-content-center m-4">
    <form action="{% url 'user_auth:create_new_user' %}" id="myForm" method="post">
        {% csrf_token %}
        <h2>Sign up</h2>

        <div class="row g-2">
            <div class="col-12">
                {% if message %}
                <div class="toast align-items-center m-2 bg-danger text-white w-100" role="alert" aria-live="assertive"
                    aria-atomic="true" id="errorToast">
                    <div class="d-flex">
                        <div class="toast-body">
                            {{ message }}
                        </div>
                        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close">
                        </button>
                    </div>
                </div>
                {% endif %}
            </div>
            <div class="col-md-6 col-12 field">
                <label class="label text-dark text-end">First Name</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="text" placeholder="First name" name="firstname" required>
                    <span class="icon is-small is-left">
                        <i class="fas fa-user-astronaut"></i>
                    </span>
                </div>
            </div>
            <div class="col-md-6 col-12-12 field">
                <label class="label text-dark text-end">Last Name</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="text" placeholder="Last name" name="lastname" required>
                    <span class="icon is-small is-left">
                        <i class="fas fa-user-astronaut"></i>
                    </span>
                </div>
            </div>
            <div class="col-md-6 col-12-12 field">
                <label class="label text-dark text-end">Username</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="text" placeholder="Astro username" name="username" required>
                    <span class="icon is-small is-left">
                        <i class="fas fa-user-astronaut"></i>
                    </span>
                </div>
            </div>
            <div class="col-md-6 col-12 field">
                <label class="label text-dark text-end">Email Address</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="email" placeholder="Email address" name="emailaddress" required>
                    <span class="icon is-small is-left">
                        <i class="fas fa-user-astronaut"></i>
                    </span>
                </div>
            </div>
            <div class="col-md-6 col-12 field">
                <label class="label text-dark text-end">Password</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="password" placeholder="Password" name="password" required>
                    <span class="icon is-small is-left">
                        <i class="fas fa-user-astronaut"></i>
                    </span>
                </div>
            </div>
            <div class="col-md-6 col-12 field">
                <label class="label text-dark text-end">Confirm Password</label>
                <div class="control has-icons-left has-icons-right">
                    <input class="input" type="password" placeholder="Confirm Password" name="confirmpassword" required>
                    <span class="icon is-small is-left">
                        <i class="fas fa-lock"></i>
                    </span>
                </div>
            </div>
        </div>
        <!-- Submit -->
        <input type="submit" class="btn btn-outline-info mb-3" value="Sign up" />
    </form>
</div>
{% endblock %}

<div class="container"></div>
<form action="{% url 'user_auth:create_new_user' %}" class="form-control align-items-center" method="post">
    {% csrf_token %}
    <div class="row g-2 align-items-center">
        <div class="col-12">
            <p class="display-5">Create User
                <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor"
                    class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                    <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                    <path fill-rule="evenodd"
                        d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
                </svg>
            </p>
        </div>
        <!--Logic for Invalid User Credentials-->
        <div class="col-12">
            <div class="row g-2">
                {% if error_message %}
                <div class="col">
                    <p class="cite text-danger-emphasis">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                            class="bi bi-asterisk" viewBox="0 0 16 16">
                            <path
                                d="M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z" />
                        </svg> {{ error_message }}
                    <p class="bolder text-secondary"><em>Please Try Again...</em></p>
                    </p>
                </div>
                {% elif current_user %}
                <div class="col">
                    <p class="cite text-danger-emphasis">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                            class="bi bi-asterisk" viewBox="0 0 16 16">
                            <path
                                d="M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z" />
                        </svg> <b>Unable to Create User</b> while Logged In!
                    <p class="bolder text-secondary"><em>To add a user - <b>Please <a
                                    href="{% url 'user_authlogout' %}">Logout</a> First</b></em></p>
                    </p>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="col-md-6 col-12">
            <label class="form-label" for="firstname">First Name</label>
            <input type="text" class="form-control" aria-describedby="firstname" name="firstname"
                placeholder="First Name" required>
        </div>

        <div class="col-md-6 col-12">
            <label class="form-label" for="lastname">Last Name</label>
            <input type="text" class="form-control" aria-describedby="lastname" name="lastname" placeholder="Last Name"
                required>
        </div>

        <div class="col-md-6 col-12">
            <label class="form-label" for="username">Username</label>
            <input type="text" class="form-control" aria-describedby="username" name="username" placeholder="Username"
                required>
        </div>

        <div class="col-md-6 col-12">
            <label class="form-label" for="emailaddress">Email Address</label>
            <input type="email" class="form-control" aria-describedby="emailaddress" name="emailaddress"
                placeholder="Email Address" required>
        </div>
    </div>

    <div class="row g-3 align-items-center">
        <div class="col">
            <label class="form-label" for="password">Password</label>
            <input type="password" class="form-control" aria-describedby="password" name="password"
                placeholder="**********" required>
        </div>

        <div class="col">
            <label class="form-label" for="confirmpassword">Confirm Password</label>
            <input type="password" class="form-control" aria-describedby="confirmpassword" name="confirmpassword"
                placeholder="**********" required>
        </div>

        <div class="col-12">
            <div class="row">
                <div class="col">
                    <input type="submit" class="btn btn-outline-primary mb-3" value="Create" />
                    <a class="btn btn-outline-secondary mb-3" href="{% url 'user_auth:login' %}"
                        title="User Login">Already Created?</a>
                </div>
            </div>
        </div>
    </div>
</form>
</div>